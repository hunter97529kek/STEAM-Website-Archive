<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Valve ERC</title>
	
	<style type="text/css">	<!--
	body {
		background : #373844;
		color : Silver;
		font-family : Arial, Helvetica, sans-serif;
		margin-top : 0px;
		margin-right : 0px;
		margin-left : 0px;
	}
	a {	color : #C4E1FF; text-decoration : none; }
	a:hover { color : #FFFFFF; text-decoration : underline; }

	-->
</style>
</head>

<body topmargin=0 leftmargin=0 marginwidth="0" marginheight="0" bgcolor="#373844" text="#C0C0C0">

<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#181831">
<tr>
    <td width="170" height="120"><img src="/images/logo_top2.gif" width="170" height="120" border="0" alt="" align="baseline"></td>
    <td width="*" height="120" align="center" background="/images/top_bg.gif">

		<table width="100%" height="120" border="0" cellspacing="0" cellpadding="0">
		<tr>
		    <td width="100%" align="center" style="font-size: 11px;">
<p align="center">
<font size="-2" color="#FFFFFF" face="Arial">powered by</font><br>
<a href="http://www.speakeasy.net/"><img src="/gfx/spkz/spkz_banner3.jpg" width="468" height="60" border="0"></a>
</p>
</td>
		</tr>
		<tr>
		    <td width="100%" valign="bottom">
				<p style="font-size: 12px; text-align: right; color: White; text-decoration: none;">
				<a href="/content/?page=about" style="text-decoration: none;">about</a>
				  -  
				<a href="/content/?page=contact" style="text-decoration: none;">contact</a>
				  -  
				<a href="/content/?page=sitemap" style="text-decoration: none;">site map</a>
				  
				</p>
			</td>
		</tr>
		</table>
		
	</td>
</tr>
</table>

<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
    <td width="150" valign="top">
	
	<table width="150" height="50" cellspacing="0" cellpadding="0" border="0">
	<tr>
	    <td><img src="/images/logo_bottom2.gif" width="150" height="50" border="0" alt=""></td>
	</tr>
	</table>

		
		
	<!-- menu bar start -->
	
	<!-- main menu -->
	
	<table width="148" cellspacing="0" cellpadding="0" bgcolor="#181831" style="border-width: 1px 1px 1px; border-style: none solid solid solid; border-color: Gray Gray Gray;"><tr><td>
	<table width="148" border="0" cellspacing="0" cellpadding="0">
	<tr>
	    <td width="10" bgcolor="#181831" background="/images/dark_blue.gif"> </td>
	    <td width="128" valign="top" background="/images/dark_blue.gif">
		
			<p style="font-size: 12px; color: White; text-decoration: none; font-weight: bold;">
			site navigation
			</p>
		
			<p style="font-size: 14px; text-align: right; color: White; text-decoration: none;">
			<a href="/">current news</a><br>
			<a href="/?archive=1">news archives</a><br>
			<br>
			<a href="/resources/">resources</a><br>
			<a href="/entities/">entities</a><br>
			<a href="/content/?page=utilities">utilities</a><br>
			<a href="/files/">files</a><br>
			<a href="/content/?page=contests">contests</a><br>
			<a href="http://www.pixelmaps.com/">Pixel map reviews</a><br>
			<a href="http://www.chatbear.com/cgi-bin/board.pl?boardid=390">forums</a><br>
			</p>
				
			
			<p><form action="/cgi-bin/search.pl" method="post"><input type="hidden" name="search" value="1">
			<input type="hidden" name="type" value="1">
			<input type="hidden" name="area" value="1">
			<input type="hidden" name="category1" value="1">
			<input type="hidden" name="category2" value="1">
			<input type="hidden" name="category3" value="1">
			<span style="color: White; font-size: 8pt;">search site:</span><br />
			<input type="text" name="terms" size="10" style="width: 128px;"><br />
			<a href="/search/" style="font-size: 8pt;">advanced search</a><br /></form></p>
			
			
		</td>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	</tr>
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	</table>
	</td></tr></table>

	<!-- menu table separator -->
	<table width="80" height="10" border="0" cellspacing="0" cellpadding="0"><tr><td><table width="1" height="10" cellspacing="0" cellpadding="0" align="center" bgcolor="#808080"><tr><td><span style="font-size: 1px; color: Gray;">.</span></td></tr></table></td></tr></table>
	
	<!-- hosted sites -->
	<table width="148" cellspacing="0" cellpadding="0" bgcolor="#181831" style="border-width: 1px 1px 1px 1px; border-style: solid solid solid solid; border-color: Gray Gray Gray Gray;"><tr><td>
	<table width="148" cellspacing="0" cellpadding="0" border="0">
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	<tr>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	    <td width="128" valign="top" background="/images/dark_blue.gif">
		
			<p style="font-size: 12px; color: White; text-decoration: none; font-weight: bold;">
			hosted sites
			</p>
		
			<p style="font-size: 11px; text-align: right; color: White; text-decoration: none;">
			<a href="http://collective.valve-erc.com/">VERC Collective</a><br>
			<a href="http://dev.valve-erc.com/index.php?go=hl_sdk">Half-Life SDK home</a><br>
			<a href="http://www.pixelmaps.com/">Pixel Map Reviews</a><br>
			<a href="http://rcs.valve-erc.com/">Remote Compile System</a><br>
			<a href="http://spirit.valve-erc.com/">Spirit of Half-Life</a><br>
			<a href="http://tf.valve-erc.com/">TFMapped</a><br>
			<a href="http://dev.valve-erc.com/index.php?go=zhlt">ZHLT home</a><br>
			</p>	
		</td>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	</tr>
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	</table>
	</td></tr></table>

	<!-- menu table separator -->
	<table width="80" height="10" border="0" cellspacing="0" cellpadding="0"><tr><td><table width="1" height="10" cellspacing="0" cellpadding="0" align="center" bgcolor="#808080"><tr><td><span style="font-size: 1px; color: Gray;">.</span></td></tr></table></td></tr></table>
	
	<!-- in focus site -->
	<table width="148" cellspacing="0" cellpadding="0" bgcolor="#181831" style="border-width: 1px 1px 1px 1px; border-style: solid solid solid solid; border-color: Gray Gray Gray Gray;"><tr><td>
	<table width="148" cellspacing="0" cellpadding="0" border="0">
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	<tr>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	    <td width="128" valign="top" background="/images/dark_blue.gif">
		
			<p style="font-size: 12px; color: White; text-decoration: none; font-weight: bold;">
			in focus: <em>site</em>
			</p>
		
			<p style="text-align: center;">
			<a href="http://www.natural-selection.org/"><img src="/images/sites/ns-infocus1.gif" width="120" height="90" border="0" alt=""></a>
			</p>	

			<p style="font-size: 11px; color: Silver; text-decoration: none;">
			The soon-to-be-released <a href="http://www.natural-selection.org/">Natural Selection</a> is a unique Half-Life modification that blurs the line between first-person shooter and real-time strategy.  Join the ranks of the vicious aliens, gear up as a TSA Frontiersmen Marine, or log in as the Marine Commander to guide your team to victory against the aliens in this "First Person Strategy" Game.
			</p>	

		</td>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	</tr>
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	</table>
	</td></tr></table>

	<!-- menu table separator -->
	<table width="80" height="10" border="0" cellspacing="0" cellpadding="0"><tr><td><table width="1" height="10" cellspacing="0" cellpadding="0" align="center" bgcolor="#808080"><tr><td><span style="font-size: 1px; color: Gray;">.</span></td></tr></table></td></tr></table>

	<!-- speakeasy -->
	<table width="148" cellspacing="0" cellpadding="0" bgcolor="#181831" style="border-width: 1px 1px 1px 1px; border-style: solid solid solid solid; border-color: Gray Gray Gray Gray;"><tr><td>
	<table width="148" cellspacing="0" cellpadding="0" border="0">
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	<tr>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	    <td width="128" valign="top" background="/images/dark_blue.gif">
		
			<p style="font-size: 12px; color: White; text-decoration: none; font-weight: bold;">
			powered by...
			</p>
		
			<p style="text-align: center;"><img src="/gfx/spkz/logo_115x90copper.gif" width="115" height="90" border="0" alt=""></p>
		
			<p style="font-size: 11px; color: Silver; text-decoration: none;">Get your groove on with <a href="http://www.speakeasy.net/">Speakeasy.net</a>.<br>
			<br>
			"<a href="http://www.speakeasy.net/">SPEAKEASY.net</a> believes the Internet is in the beginning of its evolution. Broadband is changing the way we live our lives, our mission is to continue to support and develop the most empowering tool of our lifetime."</p>	
		</td>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	</tr>
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	</table>
	</td></tr></table>
	
	<!-- menu table separator -->
	<table width="80" height="10" border="0" cellspacing="0" cellpadding="0"><tr><td><table width="1" height="10" cellspacing="0" cellpadding="0" align="center" bgcolor="#808080"><tr><td><span style="font-size: 1px; color: Gray;">.</span></td></tr></table></td></tr></table>

	<!-- want more? -->
	<table width="148" cellspacing="0" cellpadding="0" bgcolor="#181831" style="border-width: 1px 1px 1px 1px; border-style: solid solid solid solid; border-color: Gray Gray Gray Gray;"><tr><td>
	<table width="148" cellspacing="0" cellpadding="0" border="0">
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	<tr>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	    <td width="128" valign="top" background="/images/dark_blue.gif">
		
			<p style="font-size: 12px; color: White; text-decoration: none; font-weight: bold;">
			want more?
			</p>
		
			<p style="font-size: 11px; color: Silver; text-decoration: none;">
			<a href="http://www.karljones.com/halflife/almanac.asp">The Handy Vandal's Almanac</a> provides links to pretty much every known (and unknown!) source of editing information available on the net. If you can't find it there, it probably doesn't exist. 
			</p>	
		</td>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	</tr>
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	</table>
	</td></tr></table>
	
	<!-- menu table separator -->
	<table width="80" height="10" border="0" cellspacing="0" cellpadding="0"><tr><td><table width="1" height="10" cellspacing="0" cellpadding="0" align="center" bgcolor="#808080"><tr><td><span style="font-size: 1px; color: Gray;">.</span></td></tr></table></td></tr></table>

	<!-- chatbear -->
	<table width="148" cellspacing="0" cellpadding="0" bgcolor="#181831" style="border-width: 1px 1px 1px 1px; border-style: solid solid solid solid; border-color: Gray Gray Gray Gray;"><tr><td>
	<table width="148" cellspacing="0" cellpadding="0" border="0">
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	<tr>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	    <td width="128" valign="top" background="/images/dark_blue.gif">
		
			<p style="font-size: 12px; color: White; text-decoration: none; font-weight: bold;">
			chatbear
			</p>
		
			<p style="font-size: 11px; color: Silver; text-decoration: none;">
			Our awesome forums are provided by Chatbear! Want some? <a href="http://www.chatbear.com/">Get some!</a> 
			</p>
			
			<p style="font-size: 11px; color: Silver; text-decoration: none; text-align: center;">
			<img src="/images/chatbear.gif" width="108" height="93" border="0" alt=""><br>
			<a href="http://www.chatbear.com/">Go there now!</a> 
			</p>
		</td>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	</tr>
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	</table>
	</td></tr></table>
	
	<!-- menu table separator -->
	<table width="80" height="10" border="0" cellspacing="0" cellpadding="0"><tr><td><table width="1" height="10" cellspacing="0" cellpadding="0" align="center" bgcolor="#808080"><tr><td><span style="font-size: 1px; color: Gray;">.</span></td></tr></table></td></tr></table>

	<!-- thanks -->
	<table width="148" cellspacing="0" cellpadding="0" bgcolor="#181831" style="border-width: 1px 1px 1px 1px; border-style: solid solid solid solid; border-color: Gray Gray Gray Gray;"><tr><td>
	<table width="148" cellspacing="0" cellpadding="0" border="0">
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	<tr>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	    <td width="128" valign="top" background="/images/dark_blue.gif">
		
			<p style="font-size: 12px; color: White; text-decoration: none; font-weight: bold;">
			thanks!
			</p>
		
			<p style="font-size: 11px; color: Silver; text-decoration: none;">
			The success of this site is dependant upon the questions and feedback of it's users. If you have any suggestions or feedback, please drop us a line!
			</p>	
			
			<p align="center"><img src="/images/hammer.gif" width="72" height="46" border="0" alt="teh hammre"></p>
			
			<p style="font-size: 11px; color: Silver; text-decoration: none;">
			"A building is alive, like a man. Its integrity is to follow its own truth, its one single theme, and to serve its own single purpose. A man doesn't borrow pieces of his body. A building doesn't borrow hunks of its soul. Its maker gives it the soul, and every wall, window and stairway to express it." - (Roark) Ayn Rand, The Fountainhead<br>
 			<br>
			"It has to be better than good for me. It has to be right" - Steve Lawler
 			</p>	
		</td>
	    <td width="10" background="/images/dark_blue.gif"> </td>
	</tr>
	<tr>
	    <td width="148" height="10" colspan="3" background="/images/dark_blue.gif"></td>
	</tr>
	</table>
	</td></tr></table>
	
	<!-- menu bar end -->
		
	</td>
    <td width="20"> </td>
    <td valign="top">
	<br>
	
	<!-- content start -->

	<FONT FACE="Arial" SIZE="-1">
<!-- description
[title] The Retinal Scanner
[desc]
Covered here is the procedure of making a door that can only be opened by a barney using a retinal scanner. 
[/desc]
[category] Tut: Half-Life
description -->

<P><FONT FACE="" SIZE="+1">The Retinal Scanner</FONT>
<HR>
<B>What it is</B><BR>
One of the interesting effects from Half-Life that people want to use is that of barney opening a door by using a retinal scanner.  The effect is broken down into a number of smaller parts -</P>

<P><UL>
<LI> the player triggers (via a trigger_once) the whole sequence
<LI> the barney walks over to the scanner performs his "retina" animation (scripted_sequence)
<LI> the scanner model (a func_button) is activated so it flashes
<LI> some sounds (ambient_generic) are played to show that the scanner is operating
<LI> the scanner blue screens and must be rebooted (oops, nevermind that)
<LI> the door (func_door) is triggered open
</UL></P>

<P><B>The Door and Scanner</B><BR>
First things first, lets setup the basic components.  Make the door.  It can be simple or complex.  Whatever.  That's up to you.  Give it a <B>Name</B> (<I>targetname</I>) - the example map uses <I><FONT COLOR="#FFFFFF">door1</FONT></I>.  Also, set its <B>Delay before close</B> (<I>wait</I>) to -1 so it stays open.</P>

<P>For the scanner, insert one of the prefab retinal scanners which are located in the Usable Objects prefab library (included with Worldcraft).  The bottom of the scanner should be 28 units above the ground so that its at the right height to interact with barney's scripted_sequence animation.  Once you've got it in your map, select it and press Alt+Enter to bring up its entity properties (its a func_button).  Set its <B>Name</B> (<I>targetname</I>) to something (for this example, i've used <I><FONT COLOR="#FFFFFF">scanner1</FONT></I>)</P>

<P>We'll also create the sounds that the scanner will appear to make.  Create two ambient_generic entities.  Place one over the scanner and one over the door.  Select the one over the scanner and press Alt+Enter to bring up its properties.  Give it a <B>Name</B> (<I>targetname</I>) of <I><FONT COLOR="#FFFFFF">blip1</FONT></I>.  Set the <B>Path/filename.wav of WAV</B> (<I>message</I>) to <I><FONT COLOR="#FFFFFF">buttons/blip1.wav</FONT>.  In the flags properties, set the <I><FONT COLOR="#FFFFFF">Medium Radius</FONT></I>, <I><FONT COLOR="#FFFFFF">Starts Silent</FONT></I>, and <I><FONT COLOR="#FFFFFF">Is NOT Looped</FONT></I> flags.</I>  Setup the ambient_generic over the door exactly the same but name it <I><FONT COLOR="#FFFFFF">kachunk1</FONT></I> and set its <B>Path/filename.wav of WAV</B> (<I>message</I>) to <I><FONT COLOR="#FFFFFF">buttons/button4.wav</FONT></I>.
</P>

<P>While were at it, place a barney (monster_barney) beside the scanner.  In his flag properties, enable the "<FONT COLOR="#FFFFFF">Pre-Disaster</FONT>" flag to stop his annoying chatter. :)  You should now have something similar to what is pictured below.</P>

<P ALIGN="center"><IMG SRC="/gfx/resources/retina1.jpg" WIDTH=344 HEIGHT=320 BORDER=0 ALT=""></P>

<P><B>The Retinal Scanner Animation</B><BR>
Now we'll setup the the scripted_sequence that makes barney perform the animation to make him operate the retinal scanner.  Place a scripted_sequence enity right up against the scanner object.  Set its angle so it is facing the scanner.  Give it a <B>Name</B> (<I>targetname</I>) - this example uses <I><FONT COLOR="#FFFFFF">ss_retina1</FONT></I>.  Set the <B>Target Monster</B> (<I>m_iszEntity</I>) to <I><FONT COLOR="#FFFFFF">monster_barney</FONT></I>.  Set the <B>Action Animation</B> (<I>m_iszPlay</I>) to <I><FONT COLOR="#FFFFFF">retina</FONT></I> (This is the animation that will be played).  Set <B>Move to Position</B> (<I>m_fMoveTo</I>) to <FONT COLOR="#FFFFFF">Walk (<I>1</I>)</FONT>.  When the scripted_sequence is activated, Barney will walk over to its location before performing the animation.
</P>

<P>We'll also throw in a scripted_sentence so barney says something appropriate.  The location of the scripted_sentence isn't really important.  Set its <B>Name</B> (<I>targetname</I>) to something - this example uses <I><FONT COLOR="#FFFFFF">hevyes</FONT></I>.  Set the <B>Sentence Name</B> (<I>sentence</I>) to <FONT COLOR="#FFFFFF">!BA_HEVYES</FONT>.  The <I>!</I> causes the sentence to be streamed in rather than stored in memory.  The <I>BA_HEVYES</I> calls the sentence "<I>Go right on through sir, looks like you're in the barrel today.</I>"  Set the <B>Speaker Type</B> (<I>entity</I>) to <I><FONT COLOR="#FFFFFF">monster_barney</FONT></I>.  Set the <B>Listener Type</B> (<I>listener</I>) to <I><FONT COLOR="#FFFFFF">player</FONT></I>.  This will make barney focus on the player as he speaks.</P>

<P>Your scene should now look something like this -</P>

<P ALIGN="center"><IMG SRC="/gfx/resources/retina2.jpg" WIDTH=344 HEIGHT=320 BORDER=0 ALT=""></P>

<P><B>Coordination</B><BR>
Ok, now we need to coordinate everything we've just created.  This can be accomplished quite simply with a trigger_once and a multi_manager.  First, place the trigger_once brush entity just before the barney (see the picture below for reference).  Set the <B>Target</B> (<I>target</I>) of the trigger_once to <I><FONT COLOR="#FFFFFF">opendoor1</FONT></I> (this will be the name of the multi_manager which we're also about to define.  The whole sequence of events will be triggered when the player walks into this trigger_multiple.</P>

<P>Place a multi_manager somewhere in the general vicinity, and give it a <B>Name</B> (<I>targetname</I>) of <I><FONT COLOR="#FFFFFF">opendoor1</FONT></I>.  Turn off SmartEdit mode and add the following key/value pairs -</P>

<P><UL>
<LI> <B>ss_retina, 0</B> - This makes barney walk to the scripted_sequence spot and perform the retina animation.
<LI> <B>hevyes, 0.5</B> - While he's walking to the script spot, he'll look over at the player and say his sentence.
<LI> <B>scanner1, 2.5</B> - This activates the scanner which, being a func_button, changes its texture to the "in action" texture for a short time (3 seconds), then turns off.
<LI> <B>blip1, 3.3</B> - This plays a blip sound.
<LI> <B>blip1, 3.8</B> - This plays the blip sound again.  (will appear as blip1#1)
<LI> <B>blip1, 4</B> - Once more, the blip sound.  (will appear as blip1#2)
<LI> <B>kachunk1, 4.5</B> - Plays a final "kachunk" kind of sound.
<LI> <B>door1, 5.5</B> - Finally, this opens the door.
</UL></P>

<P ALIGN="center"><IMG SRC="/gfx/resources/retina3.jpg" WIDTH=344 HEIGHT=320 BORDER=0 ALT=""></P>

<P>That's it.  It's not all that complicated.  A quick example map can be found at the link below.</P>

<P><B>Entities Used</B><BR>
<LI> <A HREF="/entities/?entity=ambient_generic">ambient_generic</A>
<LI> <A HREF="/entities/?entity=func_door">func_door</A>
<LI> <A HREF="/entities/?entity=monster_barney">monster_barney</A>
<LI> <A HREF="/entities/?entity=multi_manager">multi_manager</A>
<LI> <A HREF="/entities/?entity=scripted_sentence">scripted_sentence</A>
<LI> <A HREF="/entities/?entity=scripted_sequence">scripted_sequence</A>
<LI> <A HREF="/entities/?entity=trigger_once">trigger_once</A>
</P>

<P><B>Example Maps</B><BR>
<LI> <A HREF="/files/?folder=/resources/examples/&filename=retina.zip">retina.zip</A></P>

</FONT>
	
	<!-- content end -->
	
	</td>
	<td width="10"> </td>
</tr>
</table>


<p><table width="100%" height="40" border="0" cellspacing="0" cellpadding="0" align="center" bgcolor="#181831" style="border-width: 1px 0px 0px 0px; border-style: solid solid solid solid; border-color: Gray Gray Gray Gray;">
<tr>
    <td align="center">
	
	<table width="500" cellspacing="0" cellpadding="2" border="0">
	<tr>
	    <td align="center"><p style="font-size: 11px;">Half-Life  and Worldcraft are trademarks of Valve, LLC. Copyright 1996-2002, All rights reserved. Site Content Copyright Valve, LLC 1998-2002, All Rights Reserved.</p></td>
	</tr>
	</table>

	</td>
</tr>
</table></p>


</body>
</html>

